{% extends '../base/base.html' %}
{% load static %}
{% block content %}
<!-- Content Wrapper. Contains page content -->
<div class="container">
    <!-- Content Header (Page header) -->
    <div class="content-header">
        <div class="container-fluid pl-0">
            <div class="row mb-2">
                <div class="col">
                    <h1 class="m-0">ユメステOCR(β版)</h1>
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <!-- Main content -->
    <section class="content">
        <div class="container-fluid">

            {% if is_beta %}
            {% include "../common/info_alert.html" %}
            {% endif %}

            <!-- ここにいろいろ書く -->
            <div class="row">
                <div class="col">
                    <div class="card card-primary card-outline">

                        <div class="card-header">
                            <h3 class="card-title">ユメステOCR(β版)</h3>
                        </div>

                        <div class="card-body">

                            <div class="row justify-content-center">
                                <div class="col-12 col-md-10">
                                    <p>ユメステの楽曲選曲画面の録画ファイルをアップロードすると、OCR(光学文字認識)を用いて自動で曲名・難易度・スコアを抽出し、CSV形式に整えます。</p>
                                    <h4>【重要】アップロードする動画について</h4>
                                    <p>スクロールするのではなく、以下の動画のように<strong>1曲ずつ移動する</strong>動画をアップロードしてください！<br><strong><span style="color: red">現在のところアスペクト比が1640x2360と同様の機種にしか対応していません。</strong></span></p>
                                    {% comment %} gif画像 {% endcomment %}
                                    <h4>注意点</h4>
                                    <ul>
                                        <li><span style="color: red"><strong>OCRの精度は完璧ではありません。</strong></span>誤認識が含まれる可能性がかなり高いです。</li>
                                        <li>曲名に関しては、正しい曲名リストとの照合を行っていますが、読み取り精度が悪い・未知の曲名である場合、曲名に括弧がつけられます。<strong><span style="color: red">括弧が付けられた曲名は正確でない可能性が非常に高いため、信用しないでください。</span></strong></li>
                                        <li>アップロードした動画はOCR実行後に削除されます。</li>
                                    </ul>
                                    <hr>
                                    <form id="yumesute-ocr-upload-form" method="post" enctype="multipart/form-data" style="display:block">
                                        {% csrf_token %}
                                        <div class="form-group">
                                            <label for="video">動画ファイル（.mp4のみ・最大300MB）</label>
                                            <input type="file" id="video" name="video" class="form-control-file" accept=".mp4" required>
                                            <small class="form-text text-muted">300MBまでの.mp4ファイルのみアップロード可能です。</small>
                                        </div>
                                        <button type="submit" class="btn btn-primary">アップロード</button>
                                    </form>
                                    <div id="yumesute-ocr-message" class="alert alert-info" style="display:none"></div>
                                    <div id="yumesute-ocr-download-link" style="display:none"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
</div>
<script>
    var csrfmiddlewaretoken = "{{ csrf_token }}"
</script>
<script src="{% static 'yumesute_ocr/script.js' %}"></script>
{% endblock content %}
